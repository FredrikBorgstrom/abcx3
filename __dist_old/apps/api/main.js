(()=>{"use strict";var __webpack_modules__={628:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppController=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),nestjs_request_parser_1=__webpack_require__(325),app_service_1=__webpack_require__(908);let AppController=class AppController{constructor(appService){this.appService=appService}getData(params){return console.log(params),this.appService.getData()}getCount(){return this.appService.getCount()}};tslib_1.__decorate([(0,common_1.Get)(),tslib_1.__param(0,(0,nestjs_request_parser_1.RequestParser)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==nestjs_request_parser_1.ParsedQueryModel&&nestjs_request_parser_1.ParsedQueryModel)?_a:Object]),tslib_1.__metadata("design:returntype",void 0)],AppController.prototype,"getData",null),tslib_1.__decorate([(0,common_1.Get)("count"),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],AppController.prototype,"getCount",null),AppController=tslib_1.__decorate([(0,common_1.Controller)(),tslib_1.__metadata("design:paramtypes",["function"==typeof(_b=void 0!==app_service_1.AppService&&app_service_1.AppService)?_b:Object])],AppController),exports.AppController=AppController},110:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),nestjs_prisma_1=__webpack_require__(612),app_controller_1=__webpack_require__(628),app_service_1=__webpack_require__(908);let AppModule=class AppModule{};AppModule=tslib_1.__decorate([(0,common_1.Module)({imports:[nestjs_prisma_1.PrismaModule.forRoot({isGlobal:!0,prismaServiceOptions:{middlewares:[(params,next)=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){const before=Date.now(),result=yield next(params),after=Date.now();return console.log(`Query ${params.model}.${params.action} took ${after-before}ms`),result}))]}})],controllers:[app_controller_1.AppController],providers:[app_service_1.AppService]})],AppModule),exports.AppModule=AppModule},908:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),nestjs_prisma_1=__webpack_require__(612);let AppService=class AppService{constructor(prismaService){this.prismaService=prismaService}getData(){return{message:"Welcome to api!"}}getCount(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.prismaService.article.count()}))}};AppService=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==nestjs_prisma_1.PrismaService&&nestjs_prisma_1.PrismaService)?_a:Object])],AppService),exports.AppService=AppService},612:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(752);tslib_1.__exportStar(__webpack_require__(915),exports),tslib_1.__exportStar(__webpack_require__(650),exports),tslib_1.__exportStar(__webpack_require__(961),exports)},729:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PRISMA_EXPLICIT_CONNECT=exports.PRISMA_SERVICE_OPTIONS=void 0,exports.PRISMA_SERVICE_OPTIONS="PRISMA_SERVICE_OPTIONS",exports.PRISMA_EXPLICIT_CONNECT="PRISMA_EXPLICIT_CONNECT"},961:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},809:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},650:(__unused_webpack_module,exports,__webpack_require__)=>{var PrismaModule_1;Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrismaModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),constants_1=__webpack_require__(729),prisma_service_1=__webpack_require__(915);let PrismaModule=PrismaModule_1=class PrismaModule{static forRoot(options={}){return{global:options.isGlobal,module:PrismaModule_1,providers:[{provide:constants_1.PRISMA_SERVICE_OPTIONS,useValue:options.prismaServiceOptions}]}}static forRootAsync(options){return{global:options.isGlobal,module:PrismaModule_1,imports:options.imports||[],providers:this.createAsyncProviders(options)}}static createAsyncProviders(options){return options.useExisting||options.useFactory?this.createAsyncOptionsProvider(options):options.useClass?[...this.createAsyncOptionsProvider(options),{provide:options.useClass,useClass:options.useClass}]:[...this.createAsyncOptionsProvider(options)]}static createAsyncOptionsProvider(options){return options.useFactory?[{provide:constants_1.PRISMA_SERVICE_OPTIONS,useFactory:options.useFactory,inject:options.inject||[]}]:options.useExisting?[{provide:constants_1.PRISMA_SERVICE_OPTIONS,useFactory:optionsFactory=>tslib_1.__awaiter(this,void 0,void 0,(function*(){return yield optionsFactory.createPrismaOptions()})),inject:[options.useExisting]}]:options.useClass?[{provide:constants_1.PRISMA_SERVICE_OPTIONS,useFactory:optionsFactory=>tslib_1.__awaiter(this,void 0,void 0,(function*(){return yield optionsFactory.createPrismaOptions()})),inject:[options.useClass]}]:[{provide:constants_1.PRISMA_SERVICE_OPTIONS,useFactory:optionsFactory=>tslib_1.__awaiter(this,void 0,void 0,(function*(){return yield optionsFactory.createPrismaOptions()})),inject:[]}]}};PrismaModule=PrismaModule_1=tslib_1.__decorate([(0,common_1.Module)({providers:[prisma_service_1.PrismaService],exports:[prisma_service_1.PrismaService]})],PrismaModule),exports.PrismaModule=PrismaModule},915:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrismaService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),client_1=__webpack_require__(524),prisma_module_options_1=__webpack_require__(809),constants_1=__webpack_require__(729);let PrismaService=class PrismaService extends client_1.PrismaClient{constructor(prismaServiceOptions={}){super(prismaServiceOptions.prismaOptions),this.prismaServiceOptions=prismaServiceOptions,this.prismaServiceOptions.middlewares&&this.prismaServiceOptions.middlewares.forEach((middleware=>this.$use(middleware)))}onModuleInit(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.prismaServiceOptions.explicitConnect&&(yield this.$connect())}))}enableShutdownHooks(app){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.$on("beforeExit",(()=>tslib_1.__awaiter(this,void 0,void 0,(function*(){yield app.close()}))))}))}};PrismaService=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__param(0,(0,common_1.Optional)()),tslib_1.__param(0,(0,common_1.Inject)(constants_1.PRISMA_SERVICE_OPTIONS)),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==prisma_module_options_1.PrismaServiceOptions&&prisma_module_options_1.PrismaServiceOptions)?_a:Object])],PrismaService),exports.PrismaService=PrismaService},325:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(752);tslib_1.__exportStar(__webpack_require__(907),exports),tslib_1.__exportStar(__webpack_require__(911),exports),tslib_1.__exportStar(__webpack_require__(282),exports),tslib_1.__exportStar(__webpack_require__(632),exports)},907:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestParser=void 0;const common_1=__webpack_require__(481),request_parser_service_1=__webpack_require__(632);exports.RequestParser=(0,common_1.createParamDecorator)(((data,ctx)=>{const request=ctx.switchToHttp().getRequest();return(new request_parser_service_1.RequestParserService).parseQuery(request.query,data)}))},911:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},282:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},632:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestParserService=void 0;const common_1=__webpack_require__(481),defaultRequestQueryOptions={limitParamName:"limit",limitDefaultValue:20,maxLimit:100,filterParamName:"filter",filterDefaultValue:{},pageParamName:"page",pageDefaultValue:1,orderParamName:"sort",orderDefaultValue:"id"};exports.RequestParserService=class RequestParserService{constructor(){this.options=defaultRequestQueryOptions}parseQuery(query,options={}){if("object"!=typeof query)throw new common_1.BadRequestException("Malformed QueryString");this.options=Object.assign(Object.assign({},defaultRequestQueryOptions),options),this.query=query;const page=this.parsePage(),limit=this.parseLimit(),sort=this.parseSort(),filter=this.parseFilter();return{page,skip:this.calculateSkip(page,limit),take:limit,sort,filter}}parsePage(){const pageRequestData=this.query[this.options.pageParamName],page=parseInt(pageRequestData)||this.options.pageDefaultValue;return page<1?this.options.pageDefaultValue:page}parseLimit(){const limitRequestData=this.query[this.options.limitParamName];let limit=parseInt(limitRequestData)||this.options.limitDefaultValue;return limit<1&&(limit=this.options.limitDefaultValue),limit>this.options.maxLimit&&(limit=this.options.maxLimit),limit}calculateSkip(page,limit){return(page-1)*limit}parseFilter(){let filter={};const filterRequestData=this.query[this.options.filterParamName]||this.options.filterDefaultValue;try{filter=JSON.parse(filterRequestData)}catch(e){return filter}return filter}parseSort(){const sort=[],sortQuery=(this.query[this.options.orderParamName]||this.options.orderDefaultValue).trim();if(void 0!==sortQuery&&sortQuery.length>0){const sortParams=sortQuery.split(",");for(let sortParam of sortParams){sortParam=sortParam.trim();let sortDirection="asc";sortParam.startsWith("-")&&(sortParam=sortParam.substring(1),sortDirection="desc"),sort.push({[sortParam]:sortDirection})}}return sort}}},481:module=>{module.exports=require("@nestjs/common")},143:module=>{module.exports=require("@nestjs/core")},524:module=>{module.exports=require("@prisma/client")},752:module=>{module.exports=require("tslib")}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}var __webpack_exports__={};(()=>{var exports=__webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),core_1=__webpack_require__(143),app_module_1=__webpack_require__(110);!function(){tslib_1.__awaiter(this,void 0,void 0,(function*(){const app=yield core_1.NestFactory.create(app_module_1.AppModule);app.setGlobalPrefix("api");const port=process.env.PORT||3333;yield app.listen(port),common_1.Logger.log(`ðŸš€ Application is running on: http://localhost:${port}/api`)}))}()})();var __webpack_export_target__=exports;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();
//# sourceMappingURL=main.js.map